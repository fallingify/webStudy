day08
정규화

1. 정규화
	이상현상을 제거하기 위한 작업
	3차 정규화까지만 진행한다

1) 1차 정규화
	각 컬럼은 원자값을 갖도록 분해하여 중복을 제거한다

2) 2차 정규화
	부분적 종속을 제거하여 테이블을 분리한다
	
3) 3차 정규화
	이행적 함수를 제거하여 테이블을 분리한다
	
2. TCL(Transaction Control Language) : 트랜잭션 제어어
	상품구매 + 포인트 적립
	=> 최소 2개 이상의 쿼리가 실행되어야한다
	(상품구매 업데이터 처리, 포인트 적립 업데이트 처리)

여러 쿼리를 하나로 묶어서 상품 구매라는 하나의 서비스를 만드는데
쿼리 묶음 단위 트랜잭션이다

트랜잭션
	하나의 작업 단위
	여러개의 SQL문의 묶음

1. COMMIT
	모든 작업(트랜잭션)을 확정하는 명령어

2. ROLLBACK
	이전 커밋 시점으로 되돌아가는 명령어
	DML만 가능, DDL은 ROLLBACK이 되지 않는다

DDL	: CREATE, DROP, ALTER, TRUNCATE	테이블
DML 	: SELECT, DELETE, UPDATE, INSRTE	데이터 조작

TRUNCATE와 DELETE 차이
	TRUNCATE : DDL(롤백 불가능)
	DELETE : DML(롤백 가능)

3. 집계함수
함수
	기능이다

집계함수
	그룹화된 데이터를 집계 연산을 통해 하나의 결과로 얻게된다
	집계함수는 NULL값을 제외하고 진행된다

1) COUNT(*) : NULL값을 포함한 행의 개수
2) COUNT(컬럼명) : NULL값을 제외한 행의 개수
3) SUM([DISTINCT | ALL] 표현식) : NULL을 제외한 행의 합계
4) AVG([DISTINCT | ALL] 표현식) : NULL을 제외한 행의 평균
5) MAX([DISTINCT | ALL] 표현식) : 최대값(문자, 날짜도 가능)
6) MIN([DISTINCT | ALL] 표현식) : 최소값(문자, 날짜도 가능)
7) STDDEV([DISTINCT | ALL] 표현식) : 표준편차
8) VARIANCE([DISTINCT | ALL] 표현식) : 분산

4. SELECT문 해석 및 작성 순서
SELECT [ DISTINCT ] 컬럼명 [ AS 별칭 ]
FROM 테이블 명
WHERE 조건식
GROUP BY 그룹화 기준 컬럼
HAVING 그룹 조건식
ORDER BY 정렬 기준 컬럼 [ASC 또는 DESC];

- 해석순서 : FROM -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY
- 작성순서 : SELECT -> FROM -> WHERE -> GROUP BY -> HAVING -> ORDER BY

- SELECT 절에 없는 컬럼을 ORDER BY절에서 사용 가능
- 인라인 뷰에 정의된 SELECT 컬럼을 메인 쿼리에서 사용 가능
- 인라인 뷰에 미정의된 컬럼을 메인 쿼리에서 사용 불가
- GROUP BY절에서 그룹핑 기준을 정의하게 되면, GROUP BY절의 그룹핑 기준에 사용된 컬럼과 집계함수에
  사용될 수 있는 숫자형 데이터 컬럼들의 집합을 새로 만듦
- 개별 데이터는 필요없으므로 저장하지 않음, 그러므로 GROUP BY 이후에 수행절인 SELECT 절이나
  ORDER BY 절에서 개별 데이터를 사용하는 경우 에러가 발생
- SELECT 절에는 그룹핑 기준과 숫자 형식 컬럼의 집계함수를 사용할 수 있지만
  그룹핑 기준 외의 문자 형식 컬럼은 정할 수 없다

5. GROUP BY, HAVING 절
GROUP BY절
	특정 컬럼에 있는 값을 그룹으로 묶어서 데이터를 집계한다
	테이블의 전체 데이터를 기준 컬럼을 통해 소 그룹화 시킨다
	그룹화된 결과를 단일 행으로 나타낸다 -> A 그룹의 데이터1, B그룹의 데이터2 ...

HAVING절
	그룹화된 결과에 조건을 적용하는 데 사용한다
	GROUP BY를 사용하면 조회 대상이 테이블 전체 데이터가 아닌 소그룹화 된 데이터이기 때문에
	GROUP BY 다음에 작성한 그룹 기준 컬럼외의 컬럼은 사용하지 못한다
	집계 함수 결과에 대한 조건으로 일반적으로 사용한다

SELECT 컬럼명
FROM 테이블명
GROUP BY 기준 컬럼
HAVING 그룹화된 결과에서 사용할 조건;


